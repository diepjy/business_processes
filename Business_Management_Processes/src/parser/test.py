from bin.z3 import *

original = """
(declare-const q0 Bool)
(declare-const q9 Bool)
(declare-const q10 Bool)
(declare-const q5 Bool)
(declare-const q4 Bool)
(declare-const q12 Bool)
(declare-const q2 Bool)
(declare-const q8 Bool)
(declare-const q3 Bool)
(declare-const q13 Bool)
(declare-const q14 Bool)
(declare-const q11 Bool)
(declare-const q7 Bool)
(declare-const q1 Bool)
(declare-const q6 Bool)
(declare-const b7_default_U Real)
(assert (and (<= b7_default_U 0.056) (<= -0.8854 b7_default_U)))
(declare-const b0_score Real)
(declare-const b10_score Real)
(declare-const b11_score Real)
(declare-const b12_score Real)
(declare-const b13_score Real)
(declare-const b14_score Real)
(declare-const b15_score Real)
(declare-const b16_score Real)
(declare-const b17_score Real)
(declare-const b18_score Real)
(declare-const b19_score Real)
(declare-const b1_score Real)
(declare-const b2_score Real)
(declare-const b3_score Real)
(declare-const b4_score Real)
(declare-const b5_score Real)
(declare-const b6_score Real)
(declare-const b7_score Real)
(declare-const b8_score Real)
(declare-const b9_score Real)
(declare-const p0_15_0_score Real)
(declare-const p0_15_1_score Real)
(declare-const p0_15_score Real)
(declare-const p0_1_score Real)
(declare-const p0_3_score Real)
(declare-const p0_7_score Real)
(declare-const p10_11_score Real)
(declare-const p12_13_score Real)
(declare-const p12_15_score Real)
(declare-const p14_15_score Real)
(declare-const p16_17_score Real)
(declare-const p18_19_score Real)
(declare-const p2_3_score Real)
(declare-const p4_5_score Real)
(declare-const p4_7_score Real)
(declare-const p6_7_score Real)
(declare-const p8_11_score Real)
(declare-const p8_15_score Real)
(declare-const p8_9_score Real)
(declare-const v0 Real)
(declare-const vb Real)
(declare-const vk Real)
(declare-const vl Real)
(declare-const vp Real)
(declare-const vu Real)
(declare-const vx Real)
(declare-const vy Real)
(declare-const cond2 Bool)
(declare-const cond1 Bool)
(declare-const b5_q9_U Real)
(assert (and (<= b5_q9_U 0.7747) (<= -0.3561 b5_q9_U)))
(declare-const b4_q3_U Real)
(assert (and (<= b4_q3_U 0.4347) (<= -0.1435 b4_q3_U)))
(declare-const b12_q3_U Real)
(assert (and (<= b12_q3_U 0.6717) (<= -0.2797 b12_q3_U)))
(declare-const b16_q1_U Real)
(assert (and (<= b16_q1_U 0.6472) (<= -0.9047 b16_q1_U)))

(assert (= cond2 (< 0.6 (ite (< (ite (< (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score)) (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score)) (+ b18_score b19_score)) (+ b18_score b19_score) (ite (< (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score)) (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score))))))
(assert (= cond1 (< 0.5 (ite (< (ite (< (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score)) (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score)) (+ b18_score b19_score)) (+ b18_score b19_score) (ite (< (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score)) (* (+ (ite (< (ite (< b0_score b1_score) b0_score b1_score) (ite (< b2_score b3_score) b2_score b3_score)) (ite (< b2_score b3_score) b2_score b3_score) (ite (< b0_score b1_score) b0_score b1_score)) (ite (< (ite (< b4_score b5_score) b4_score b5_score) (ite (< b6_score b7_score) b6_score b7_score)) (ite (< b6_score b7_score) b6_score b7_score) (ite (< b4_score b5_score) b4_score b5_score))) (+ (ite (< (ite (< b8_score b9_score) b8_score b9_score) (ite (< b10_score b11_score) b10_score b11_score)) (ite (< b10_score b11_score) b10_score b11_score) (ite (< b8_score b9_score) b8_score b9_score)) (ite (< (ite (< b12_score b13_score) b12_score b13_score) (ite (< b14_score b15_score) b14_score b15_score)) (ite (< b14_score b15_score) b14_score b15_score) (ite (< b12_score b13_score) b12_score b13_score)))) (ite (< b16_score b17_score) b16_score b17_score))))))
(assert (= b3_score (ite (or q3 q7) (+ (ite q3 0.3078 0.0) (ite q7 0.1332 0.0)) 0.7163)))
(assert (= b2_score (ite (or q12 q0) (* (ite q12 0.3504 1.0) (ite q0 0.4032 1.0)) (* 3.0 vp))))
(assert (= b5_score (ite (or q3 q9) (* (ite q3 0.3235 1.0) (ite q9 (+ (* 2.0 v0) b5_q9_U) 1.0)) (* 0.0 vy))))
(assert (implies q3 (>= b4_score (+ 0.0948 b4_q3_U))))
(assert (implies q11 (>= b4_score 0.1327)))
(assert (implies (not (or q3 q11)) (= b4_score 0.8418)))
(assert (implies (or q3 q11) (or (and q3 (= b4_score (+ 0.0948 b4_q3_U))) (and q11 (= b4_score 0.1327)))))
(assert (= b7_score (ite (or q8 q2) (+ (ite q8 vx 0.0) (ite q2 0.9709 0.0)) (+ 0.5696 b7_default_U))))
(assert (implies q14 (>= b6_score 0.5613)))
(assert (implies q4 (>= b6_score 0.6564)))
(assert (implies (not (or q14 q4)) (= b6_score 0.6351)))
(assert (implies (or q14 q4) (or (and q14 (= b6_score 0.5613)) (and q4 (= b6_score 0.6564)))))
(assert (implies q11 (<= b9_score 0.3598)))
(assert (implies q7 (<= b9_score 0.4311)))
(assert (implies (not (or q11 q7)) (= b9_score 0.0868)))
(assert (implies (or q11 q7) (or (and q11 (= b9_score 0.3598)) (and q7 (= b9_score 0.4311)))))
(assert (= b8_score (ite (or q14 q5) (* (ite q14 0.7031 1.0) (ite q5 0.6469 1.0)) 0.3753)))
(assert (implies q0 (>= b19_score 0.0663)))
(assert (implies q10 (>= b19_score 0.5418)))
(assert (implies (not (or q0 q10)) (= b19_score 0.7368)))
(assert (implies (or q0 q10) (or (and q0 (= b19_score 0.0663)) (and q10 (= b19_score 0.5418)))))
(assert (= b17_score (ite (or q4 q11) (+ (ite q4 (* 2.0 vl) 0.0) (ite q11 0.8956 0.0)) 0.529)))
(assert (implies q6 (<= b18_score 0.0261)))
(assert (implies q4 (<= b18_score 0.8287)))
(assert (implies (not (or q6 q4)) (= b18_score 0.9865)))
(assert (implies (or q6 q4) (or (and q6 (= b18_score 0.0261)) (and q4 (= b18_score 0.8287)))))
(assert (implies q14 (<= b0_score (* 0.0 vl))))
(assert (implies q0 (<= b0_score 0.785)))
(assert (implies (not (or q14 q0)) (= b0_score 0.8919)))
(assert (implies (or q14 q0) (or (and q14 (= b0_score (* 0.0 vl))) (and q0 (= b0_score 0.785)))))
(assert (= b1_score (ite (or q6 q7) (* (ite q6 0.6819 1.0) (ite q7 0.7271 1.0)) 0.539)))
(assert (= b11_score (ite (or q1 q4) (+ (ite q1 0.465 0.0) (ite q4 0.6019 0.0)) 0.3478)))
(assert (implies q3 (<= b12_score (+ (* 3.0 vu) b12_q3_U))))
(assert (implies q9 (<= b12_score (* 2.0 vu))))
(assert (implies (not (or q3 q9)) (= b12_score 0.0223)))
(assert (implies (or q3 q9) (or (and q3 (= b12_score (+ (* 3.0 vu) b12_q3_U))) (and q9 (= b12_score (* 2.0 vu))))))
(assert (= b10_score (ite (or q10 q12) (* (ite q10 0.1041 1.0) (ite q12 0.6119 1.0)) 0.8983)))
(assert (implies q13 (>= b15_score 0.323)))
(assert (implies q12 (>= b15_score 0.9485)))
(assert (implies (not (or q13 q12)) (= b15_score 0.6186)))
(assert (implies (or q13 q12) (or (and q13 (= b15_score 0.323)) (and q12 (= b15_score 0.9485)))))
(assert (= b16_score (ite (or q1 q11) (+ (ite q1 (+ 0.8562 b16_q1_U) 0.0) (ite q11 (* 3.0 vb) 0.0)) 0.6468)))
(assert (implies q5 (>= b13_score 0.9802)))
(assert (implies q2 (>= b13_score 0.9236)))
(assert (implies (not (or q5 q2)) (= b13_score 0.8039)))
(assert (implies (or q5 q2) (or (and q5 (= b13_score 0.9802)) (and q2 (= b13_score 0.9236)))))
(assert (implies q6 (<= b14_score (* 2.0 vk))))
(assert (implies q13 (<= b14_score 0.4516)))
(assert (implies (not (or q6 q13)) (= b14_score (* 2.0 vl))))
(assert (implies (or q6 q13) (or (and q6 (= b14_score (* 2.0 vk))) (and q13 (= b14_score 0.4516)))))
(declare-const always_false_analysis2 Bool)
"""

f = z3.parse_smt2_string (original)

extra = """
(declare-const always_false_analysis2 Bool)
(declare-const cond2 Bool)
(assert (= always_false_analysis2 cond2))
(assert always_false_analysis2)
"""
e = z3.parse_smt2_string (extra)

s = z3.Solver ()
import sys
if len (sys.argv) >= 2: s.push ()
s.add (f)
s.add (e)
print 'Result of first check', s.check ()
m = s.model ()
print m
a = list ()
for k in m:
    a.append (k() == m[k])

for x in a: s.add (x)
print 'Result of second check', s.check ()

s2 = z3.Solver ()
s2.add (f)
s2.add (e)
for x in a: s2.add (x)
print 'Independent result', s2.check ()
